https://github.com/fangli/fluent-plugin-influxdb


Installation Steps:

Follow the steps 
https://docs.fluentd.org/v1.0/articles/install-by-rpm

>execute this script and installation will be completed
https://toolbelt.treasuredata.com/sh/install-redhat-td-agent3.sh | sh


install wget
>>yum install wget


create directory 
/opt/tool/influxsetup

>>cd /opt/tool/influxsetup

download rpm packages to above folder, to download the packages execute following commands

wget https://dl.influxdata.com/influxdb/releases/influxdb-1.4.3.x86_64.rpm
wget https://dl.influxdata.com/chronograf/releases/chronograf-1.4.2.1.x86_64.rpm
wget https://dl.influxdata.com/kapacitor/releases/kapacitor-1.4.0.x86_64.rpm
wget https://dl.influxdata.com/telegraf/releases/telegraf-1.5.2-1.x86_64.rpm

(Intall all the components from )
(https://portal.influxdata.com/downloads)


Install the rpm packages, step by step
sudo yum localinstall influxdb-1.4.3.x86_64.rpm
sudo yum localinstall chronograf-1.4.2.1.x86_64.rpm
sudo yum localinstall telegraf-1.5.2-1.x86_64.rpm
sudo yum localinstall kapacitor-1.4.0.x86_64.rpm



Ref: https://docs.influxdata.com/chronograf/v1.4/introduction/getting-started/#influxdb-setup

Starting influxdb
/etc/init.d/influxdb start

Checking running status 
curl "http://localhost:8086/query?q=show+databases"

start Kapacitor
/etc/init.d/kapacitor start

Checking running status 
kapacitor list tasks

Start Telegraf
/etc/init.d/telegraf start


Checking Telegraf running status
curl "http://localhost:8086/query?q=select+*+from+telegraf..cpu"

Start Chronograf
/etc/init.d/chronograf start

At this point Chronograf will not start it port 8888 is already in use
400 Bad Request
'json' or 'msgpack' parameter is required


changing port no of chronograf
/usr/lib/chronograf/scripts/chronograf.service
/usr/lib/chronograf/scripts/init.sh

change port number to 9999 from 8888
Environment="PORT=9999"

Export PORT veriable in rc.local
/etc/rc.d/rc.local
export PORT=9999

Restart the server


Install fluentd plugin 
Ref: https://github.com/repeatedly/fluent-plugin-netflow

td-agent-gem install fluent-plugin-grep
command avilable at following path
/opt/td-agent/embedded/bin/fluent-gem
./fluent-gem install fluent-plugin-influxdb -v 1.0.0.rc1 --no-document

bug fix
https://github.com/rails/rails/commit/c766f3e4b013cf4bcc4ad9ba64636bbf944b320c

Remove-      options[:usec]  || ((options[:hour] || options[:min] || options[:sec]) ? 0 : usec)
Added+       options[:usec]  || ((options[:hour] || options[:min] || options[:sec]) ? 0 : Rational(nsec, 1000))

https://groups.google.com/forum/#!topic/fluentd/8ebDykWe0Fw

https://docs.fluentd.org/v0.12/articles/plugin-management  -- found error
https://github.com/fangli/fluent-plugin-influxdb	 -- found error
/usr/sbin/td-agent-gem install fluent-plugin-netflow
>> /usr/sbin/td-agent-gem install fluent-plugin-influxdb -v "~> 0.3"  --no-document # for fluentd v0.12 or later
>> /usr/sbin/td-agent-gem install fluent-plugin-influxdb -v 1.0.0.rc1 --no-document # for fluentd v0.14 or later

restart td-agent
>> /etc/init.d/td-agent restart

td-agent.config setting:

<match test.*>
  @type mongo  
  connection_string mongodb://127.0.0.1:49650
  collection test
</match>


<match spl.**>
  @type influxdb
  host localhost
  port 8086
  dbname fluentd
  database fluent
  collection spl
 </match>


<match spl.*>
  @type copy
  deep_copy true  
  format json
  <store>
    @type influxdb
    host localhost
    port 8086
    dbname test
    use_ssl false
    time_precision s     
    <buffer>
        flush_interval 10s
      </buffer>
  </store>
</match>




In WebSocket plugin
https://github.com/sebryu/fluent_plugin_in_websocket